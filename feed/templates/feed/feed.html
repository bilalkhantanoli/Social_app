{% extends 'feed/main.html' %}

{% block content %}
<div class="post-card glass-panel" style="margin-bottom: 2rem;">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <h3 style="margin-bottom: 1rem;">Share something...</h3>
        <!-- We use simple inputs here or standard form rendering -->
        <div style="margin-bottom: 1rem;">
            {{ form.title }}
        </div>
        <div style="margin-bottom: 1rem;">
            {{ form.content }}
        </div>
        <div style="margin-bottom: 1rem;">
            {{ form.image }}
        </div>
        <button type="submit" class="btn btn-primary" style="width: 100%;">Post</button>
    </form>
</div>

<div id="feed-container">
    {% include 'feed/partials/post_list.html' %}
</div>

<script>
    // Simple toggle logic for comments
    document.addEventListener('click', function (e) {
        if (e.target.closest('.action-btn') && e.target.closest('.action-btn').innerHTML.includes('fa-comment')) {
            const card = e.target.closest('.post-card');
            const box = card.querySelector('[id^="comment-box-"]');
            if (box) {
                box.style.display = box.style.display === 'none' ? 'block' : 'none';
            }
        }
    });
</script>
{% endblock %}